

<!DOCTYPE html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Configuration file I/O &mdash; haddock3 3.0.0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../../_static/css/theme.min.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/custom.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/theme.min.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Expandable Parameters" href="expandable_parameters.html" />
    <link rel="prev" title="Clean output from step folders" href="clean_steps.html" /> 

</head>

<body>
    <header>
        <div class="container">
            <a class="site-nav-toggle hidden-lg-up"><i class="icon-menu"></i></a>
            <a class="site-title" href="../../index.html">
                haddock3
            </a>
        </div>
    </header>


<div class="breadcrumbs-outer hidden-xs-down">
    <div class="container">
        















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="breadcrumbs">
    
      <li><a href="../../index.html">Docs</a></li>
        
          <li><a href="../index.html">Library Reference</a></li>
        
          <li><a href="index.html">Gear Reference</a></li>
        
      <li>Configuration file I/O</li>
    
    
      <li class="breadcrumbs-aside">
        
            
            <a href="../../_sources/reference/gear/config.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>
</div>
    </div>
</div>
    <div class="main-outer">
        <div class="container">
            <div class="row">
                <div class="col-12 col-lg-3 site-nav">
                    
<div role="search">
    <form class="search" action="../../search.html" method="get">
        <div class="icon-input">
            <input type="text" name="q" placeholder="Search" />
            <span class="icon-search"></span>
        </div>
        <input type="submit" value="Go" class="d-hidden" />
        <input type="hidden" name="check_keywords" value="yes" />
        <input type="hidden" name="area" value="default" />
    </form>
</div>
                    <div class="site-nav-tree">
                        
                            
                            
                                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../intro.html">A brief introduction to HADDOCK3</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../INSTALL.html">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../INSTALL.html#clone-this-repository">1. Clone this repository:</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../INSTALL.html#create-a-virtual-environment-with-python-3-9-and-install-dependencies">2 Create a virtual environment with Python 3.9+ and install dependencies:</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../INSTALL.html#install-the-haddock3-package-and-command-line-clients">3. Install the HADDOCK3 package and command line clients</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../INSTALL.html#make-a-cns-binary-shortcut-to-the-expected-path">4. Make a CNS binary shortcut to the expected path:</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../INSTALL.html#keep-your-installation-up-to-date">5. Keep your installation up to date</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../INSTALL.html#optional-install-mpi-libraries-if-you-intend-to-run-haddock3-with-mpi">6. (Optional) Install MPI libraries if you intend to run HADDOCK3 with MPI</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../INSTALL.html#installing-third-party-packages">Installing third-party packages</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../INSTALL.html#lightdock"><code class="docutils literal notranslate"><span class="pre">lightdock</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../../INSTALL.html#gdock"><code class="docutils literal notranslate"><span class="pre">gdock</span></code></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../USAGE.html">Usage</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../USAGE.html#run-haddock3">Run HADDOCK3</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../examples.html">Workflow Examples</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../examples.html#docking-antibogy-antigen">docking-antibogy-antigen</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples.html#docking-protein-dna">docking-protein-dna</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples.html#docking-protein-homotrimer">docking-protein-homotrimer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples.html#docking-protein-ligand">docking-protein-ligand</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples.html#docking-protein-ligand-shape">docking-protein-ligand-shape</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples.html#docking-protein-peptide">docking-protein-peptide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples.html#docking-protein-protein">docking-protein-protein</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples.html#refine-complex">refine-complex</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples.html#scoring">scoring</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples.html#docking-multiple-ambig">docking-multiple-ambig</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/index.html">Advanced features</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../tutorials/index.html#haddock3-functionalities">HADDOCK3 functionalities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tutorials/index.html#tutorials-for-developers">Tutorials for developers</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../clients/index.html">Command-line interfaces</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../clients/clihd3.html">Run HADDOCK3</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../clients/clicfg.html">Retrieve config</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../clients/cliscore.html">Calculate score</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../clients/clipp.html">PDB preprocessing client</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../clients/clicp.html">Copy steps to new run</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../clients/cliclean.html">Clean HADDOCK3 runs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../clients/cliunpack.html">Unpack HADDOCK3 run</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../clients/climpi.html">HADDOCK3 MPI Run</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../clients/clibm.html">Benchmark Client</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../clients/clidmn.html">Benchmark Daemon</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../clients/clianalyse.html">Analysis client</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../modules/index.html">Modules</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../modules/topology/index.html">Topology Modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../modules/sampling/index.html">Sampling Modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../modules/refinement/index.html">Model Refinement Modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../modules/scoring/index.html">Scoring Modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../modules/analysis/index.html">Analysis Modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../modules/extras/index.html">Extra modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../modules/index.html#module-haddock.modules">Parent code for modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../modules/index.html#module-haddock.modules.base_cns_module">Parent code for CNS modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../modules/index.html#general-default-parameters">General Default parameters</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../testing/index.html">Testing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../testing/integration_tests.html">Running integration tests manually</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../contributing.html">Contributing to HADDOCK3</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../contributing.html#contributing-new-code">1. Contributing new code</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../contributing.html#contributing-with-documentation">2. Contributing with documentation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../citing.html">Citing</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Library Reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../core/index.html">Core Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libs/index.html">Libs Reference</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Gear Reference</a></li>
</ul>
</li>
</ul>

                            
                        
                    </div>
                </div>
                <div class="col-12 col-lg-9">
                    <div class="document">
                        
                            
  <section id="module-haddock.gear.config">
<span id="configuration-file-i-o"></span><h1>Configuration file I/O<a class="headerlink" href="#module-haddock.gear.config" title="Permalink to this heading">¶</a></h1>
<p>Module to read and write HADDOCK3 configuration files.</p>
<p>HADDOCK3 user configuration files follow TOML syntax plus additional
features required for HADDOCK3. Therefore, we have implemented our own
TOML-like parser to accommodate the extra features needed for HADDOCK3.
However, HADDOCK3 can also read pure TOML files.</p>
<p>The most relevant features of HADDOCK3 user configuration files are the
hability to prepare TOML-like files but with repeated header names, for
example:</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="k">[topoaa]</span>
<span class="c1"># parameters here...</span>

<span class="k">[rigidbody]</span>
<span class="c1"># parameters here...</span>

<span class="k">[caprieval]</span>
<span class="c1"># parameters here...</span>

<span class="k">[flexref]</span>
<span class="c1"># parameters here...</span>

<span class="k">[caprieval]</span>
<span class="c1"># parameters here...</span>
</pre></div>
</div>
<p>From the user perspective, everything else just behaves as in TOML.
Actually, HADDOCK3 uses TOML to finally read the configuration files.
Users can also provide pure TOML compatible files, for example:</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="k">[topoaa]</span>
<span class="c1"># parameters here...</span>

<span class="k">[rigidbody]</span>
<span class="c1"># parameters here...</span>

<span class="k">[caprieval]</span>
<span class="c1"># parameters here...</span>

<span class="k">[flexref]</span>
<span class="c1"># parameters here...</span>

<span class="k">[&#39;caprieval.1&#39;]</span>
<span class="c1"># parameters here...</span>
</pre></div>
</div>
<p>Because HADDOCK3 uses TOML in the end to read the configuration files,
all TOML rules apply regarding defining <code class="docutils literal notranslate"><span class="pre">parameter</span> <span class="pre">=</span> <span class="pre">value</span></code> pairs.</p>
<p>Read more about TOML for Python here: <a class="reference external" href="https://pypi.org/project/toml/">https://pypi.org/project/toml/</a></p>
<dl class="py exception">
<dt class="sig sig-object py" id="haddock.gear.config.ConfigFormatError">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">haddock.gear.config.</span></span><span class="sig-name descname"><span class="pre">ConfigFormatError</span></span><a class="reference internal" href="../../_modules/haddock/gear/config.html#ConfigFormatError"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#haddock.gear.config.ConfigFormatError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#Exception" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Exception</span></code></a></p>
<p>Exception if there is a format error.</p>
<dl class="py method">
<dt class="sig sig-object py" id="haddock.gear.config.ConfigFormatError.with_traceback">
<span class="sig-name descname"><span class="pre">with_traceback</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#haddock.gear.config.ConfigFormatError.with_traceback" title="Permalink to this definition">¶</a></dt>
<dd><p>Exception.with_traceback(tb) –
set self.__traceback__ to tb and return self.</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="haddock.gear.config.convert_to_path">
<span class="sig-prename descclassname"><span class="pre">haddock.gear.config.</span></span><span class="sig-name descname"><span class="pre">convert_to_path</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/haddock/gear/config.html#convert_to_path"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#haddock.gear.config.convert_to_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert a variable to Path if variable evaluates to true.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="haddock.gear.config.convert_variables_to_paths">
<span class="sig-prename descclassname"><span class="pre">haddock.gear.config.</span></span><span class="sig-name descname"><span class="pre">convert_variables_to_paths</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cfg</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/haddock/gear/config.html#convert_variables_to_paths"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#haddock.gear.config.convert_variables_to_paths" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert config variables to paths.</p>
<p>Applies only to those variables HADDOCK3 needs as paths.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cfg</strong> (<em>dictionary</em>) – A dictionary containing the HADDOCK3 parameters.</p></li>
<li><p><strong>.. see-also::</strong> – <a class="reference internal" href="#haddock.gear.config.match_path_criteria" title="haddock.gear.config.match_path_criteria"><code class="xref py py-func docutils literal notranslate"><span class="pre">match_path_criteria()</span></code></a></p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="haddock.gear.config.get_module_name">
<span class="sig-prename descclassname"><span class="pre">haddock.gear.config.</span></span><span class="sig-name descname"><span class="pre">get_module_name</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/haddock/gear/config.html#get_module_name"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#haddock.gear.config.get_module_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the module name according to the config parser.</p>
<p>Get the name without the integer suffix.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="haddock.gear.config.load">
<span class="sig-prename descclassname"><span class="pre">haddock.gear.config.</span></span><span class="sig-name descname"><span class="pre">load</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fpath</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/haddock/gear/config.html#load"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#haddock.gear.config.load" title="Permalink to this definition">¶</a></dt>
<dd><p>Load an HADDOCK3 configuration file to a dictionary.</p>
<p>Accepts HADDOCK3 <code class="docutils literal notranslate"><span class="pre">cfg</span></code> files or pure <code class="docutils literal notranslate"><span class="pre">toml</span></code> files.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>fpath</strong> (str or <a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">pathlib.Path</span></code></a>) – Path to user configuration file.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>dictionary</em> – Representing the user configuration file where first level of
keys are the module names. Step keys will have a numeric
suffix, for example: <code class="docutils literal notranslate"><span class="pre">module.1</span></code>.</p></li>
<li><p><em>.. see-also::</em> –</p>
<ul>
<li><p><a class="reference internal" href="#haddock.gear.config.loads" title="haddock.gear.config.loads"><code class="xref py py-func docutils literal notranslate"><span class="pre">loads()</span></code></a></p></li>
</ul>
</li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="haddock.gear.config.loads">
<span class="sig-prename descclassname"><span class="pre">haddock.gear.config.</span></span><span class="sig-name descname"><span class="pre">loads</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cfg_str</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/haddock/gear/config.html#loads"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#haddock.gear.config.loads" title="Permalink to this definition">¶</a></dt>
<dd><p>Read a string representing a config file to a dictionary.</p>
<p>Config strings are converted to toml-compatible format and finally
read by the toml library.</p>
<p>All headers (dictionary keys) will be suffixed by an integer
starting at <code class="docutils literal notranslate"><span class="pre">1</span></code>. For example: <code class="docutils literal notranslate"><span class="pre">topoaa.1</span></code>. If the key is
repeated, <code class="docutils literal notranslate"><span class="pre">2</span></code> is appended, and so forth. Even if specific
integers are provided by the user, the suffix integers will be
normalized.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>cfg_str</strong> (<em>str</em>) – The string representing the config file. Accepted formats are
the HADDOCK3 config file or pure <cite>toml</cite> syntax.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><em>dict</em> – The config in the form of a dictionary.
The order of the keys matters as it defines the order of the
steps in the workflow.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="haddock.gear.config.match_path_criteria">
<span class="sig-prename descclassname"><span class="pre">haddock.gear.config.</span></span><span class="sig-name descname"><span class="pre">match_path_criteria</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">param</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/haddock/gear/config.html#match_path_criteria"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#haddock.gear.config.match_path_criteria" title="Permalink to this definition">¶</a></dt>
<dd><p>Confirm a parameter should be converted to path.</p>
<p>This function contains the rules defining which parameter need to be
converted to Path before be sent to HADDOCK3.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="haddock.gear.config.save">
<span class="sig-prename descclassname"><span class="pre">haddock.gear.config.</span></span><span class="sig-name descname"><span class="pre">save</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">params</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pure_toml</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/haddock/gear/config.html#save"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#haddock.gear.config.save" title="Permalink to this definition">¶</a></dt>
<dd><p>Write a dictionary to a HADDOCK3 config file.</p>
<p>Write the HADDOCK3 parameter dictionary to a <cite>.cfg</cite> file. There is
also the option to write in pure TOML format. Both are compatible with
HADDOCK3.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>params</strong> (<em>dict</em>) – The dictionary containing the parameters.</p></li>
<li><p><strong>path</strong> (<em>str or pathlib.Path</em>) – File name where to save the configuration file.</p></li>
<li><p><strong>pure_toml</strong> (<em>bool</em>) – Save config in pure toml format.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>


                        
                    </div>
                </div>
            </div>
        </div>
    </div>    


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'3.0.0',
            LANGUAGE:'en',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
    <script type="text/javascript" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/sphinx_highlight.js"></script>
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  
    <div class="footer" role="contentinfo">
        <div class="container">
            &#169; Copyright 2022, BonvinLab.
        Last updated on Jan 18, 2023.
        Created using <a href="http://sphinx-doc.org/">Sphinx</a> 5.3.0.
        </div>
    </div>  

</body>
</html>